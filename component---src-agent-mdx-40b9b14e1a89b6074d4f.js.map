{"version":3,"sources":["webpack:///../src/agent.mdx"],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","src","alt","isMDXComponent"],"mappings":"yPAMaA,G,UAAe,S,+LAE5B,IAKMC,EAAc,CAClBD,gBAEIE,EAAYC,IACH,SAASC,EAAT,GAGZ,IAFDC,EAEC,EAFDA,WACGC,EACF,8BACD,OAAO,YAACJ,EAAD,eAAeD,EAAiBK,EAAhC,CAAuCD,WAAYA,EAAYE,QAAQ,cAC5E,kBACE,GAAM,SADR,SAGA,mIACE,iBACE,KAAQ,6DACR,WAAc,KAFhB,kCADF,qCAMA,uMACA,mBAAKC,IAAI,qCAAqCC,IAAI,0BAClD,kBACE,GAAM,+BADR,+BAGA,2ZACA,kBACE,GAAM,UADR,UAGA,uDACA,uBAAK,oBACD,UAAa,gBACb,WAAc,OAFb,kNAUL,0CACE,0BACE,WAAc,KADhB,oFAGF,uEACE,0BACE,WAAc,KADhB,YADF,gBAKA,uBAAK,oBACD,UAAa,gBACb,WAAc,OAFb,wRAYL,kBACE,GAAM,kBADR,kBAGA,4FACE,iBACE,KAAQ,6BACR,WAAc,KAFhB,YADF,MAMA,uBAAK,oBACD,UAAa,gBACb,WAAc,OAFb,6KAKL,2CACE,iBACE,KAAQ,6BACR,WAAc,KAFhB,YADF,MAMA,uBAAK,oBACD,UAAa,sBACb,WAAc,OAFb,wMAML,kBACE,GAAM,yBADR,yBAGA,+BACE,iBACE,KAAQ,+BACR,WAAc,KAFhB,cADF,QAME,iBACE,KAAQ,gCACR,WAAc,KAFhB,eANF,2BAWA,gDACE,0BACE,WAAc,KADhB,WADF,oFAKE,0BACE,WAAc,KADhB,cALF,UASA,4FACE,0BACE,WAAc,KADhB,sBADF,iEAKA,8CACE,iBACE,KAAQ,oCACR,WAAc,KAFhB,WADF,gKAOA,iFACE,0BACE,WAAc,KADhB,oBADF,YAKA,sBAEE,kBACE,WAAc,MADhB,mBAGE,0BACE,WAAc,MADhB,aAHF,OAOE,0BACE,WAAc,MADhB,yCAPF,YAaA,kBACE,WAAc,MADhB,+DAKA,kBACE,WAAc,MADhB,gDAKA,kBACE,WAAc,MADhB,6CAKF,2EACA,sBAEE,kBACE,WAAc,MACb,0BACC,WAAc,MADf,6BAKH,kBACE,WAAc,MACb,0BACC,WAAc,MADf,yBAKH,kBACE,WAAc,MACb,0BACC,WAAc,MADf,4BAKL,iCACA,uBAAK,oBACD,UAAa,cACb,WAAc,OAFb,mK,6LASTL,EAAWM,gBAAiB","file":"component---src-agent-mdx-40b9b14e1a89b6074d4f.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/sorry-cypress.dev/sorry-cypress.dev/node_modules/gatsby-theme-docz/src/base/Layout.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n    <h2 {...{\n      \"id\": \"guide\"\n    }}>{`Guide`}</h2>\n    <p>{`Parallelizing cypress tests means running different tests on multiple cypress agents at the same time. The `}\n      <a {...{\n        \"href\": \"https://docs.cypress.io/guides/guides/parallelization.html\",\n        \"parentName\": \"p\"\n      }}>{`official Cypress documentation`}</a>\n      {` greatly explains why is it good.`}</p>\n    <p>{`It is important to note that this project only replaces the original cypress dashboard. You will still need to set up (and pay for) a CI environment that runs cypress agents.`}</p>\n    <img src=\"public/parallelization-diagram.png\" alt=\"Parallization diagram\" />\n    <h2 {...{\n      \"id\": \"cypress-agent-configuration\"\n    }}>{`Cypress agent configuration`}</h2>\n    <p>{`Cypress agent is the tools that runs the tests. When an agent is configured to run test in parallel, it will try to connect a remote dashboard to coordinate the tests running order. When using sorry-cypress you'll need to override the default configuration and use an alternative URL. The next few sections explain how to reconfigure cypress agents for communicating with sorry-cypress.`}</p>\n    <h2 {...{\n      \"id\": \"manual\"\n    }}>{`Manual`}</h2>\n    <p>{`Find cypress installation path`}</p>\n    <pre><code {...{\n        \"className\": \"language-bash\",\n        \"parentName\": \"pre\"\n      }}>{`$ DEBUG=cypress:* cypress version\n\n...\n# here it is\ncypress:cli Reading binary package.json from: /Users/agoldis/Library/Caches/Cypress/3.4.1/Cypress.app/Contents/Resources/app/package.json +0ms\n...\n`}</code></pre>\n    <p>{`In my case it is: `}\n      <inlineCode {...{\n        \"parentName\": \"p\"\n      }}>{`/Users/agoldis/Library/Caches/Cypress/3.4.1/Cypress.app/Contents/Resources/app/`}</inlineCode></p>\n    <p>{`Change the default dashboard URL - point it to `}\n      <inlineCode {...{\n        \"parentName\": \"p\"\n      }}>{`director`}</inlineCode>\n      {` service URL`}</p>\n    <pre><code {...{\n        \"className\": \"language-bash\",\n        \"parentName\": \"pre\"\n      }}>{`$ cat /Users/agoldis/Library/Caches/Cypress/3.4.1/Cypress.app/Contents/Resources/app/packages/server/config/app.yml\n\n...\n# Replace this with a URL of the alternative dashboard\nproduction:\n  # api_url: \"https://api.cypress.io/\"\n  api_url: \"http://localhost:1234/\"\n...\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"cli-one-liners\"\n    }}>{`CLI one-liners`}</h2>\n    <p>{`Use this CLI one-liner to change cypress configuration (courtesy of `}\n      <a {...{\n        \"href\": \"https://github.com/MeStrak\",\n        \"parentName\": \"p\"\n      }}>{`@MeStrak`}</a>\n      {`):`}</p>\n    <pre><code {...{\n        \"className\": \"language-bash\",\n        \"parentName\": \"pre\"\n      }}>{`> sed -i -e 's|api_url:.*$|api_url: \"https://sorry-cypress-demo-director.herokuapp.com/\"|g' /*/.cache/Cypress/*/Cypress/resources/app/packages/server/config/app.yml\n`}</code></pre>\n    <p>{`Or for windows (by `}\n      <a {...{\n        \"href\": \"https://github.com/nickcox\",\n        \"parentName\": \"p\"\n      }}>{`@nickcox`}</a>\n      {`):`}</p>\n    <pre><code {...{\n        \"className\": \"language-powershell\",\n        \"parentName\": \"pre\"\n      }}>{`ls $env:LOCALAPPDATA/Cypress/Cache -Recurse -Filter app.yml |\n% { (Get-Content $_ -Raw) -replace \"https://api.cypress.io/\", \"https://sorry-cypress-demo-director.herokuapp.com/\" | Out-File $_ }\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"sorry-cypress-wrapper\"\n    }}>{`sorry-cypress wrapper`}</h2>\n    <p>{`Thanks `}\n      <a {...{\n        \"href\": \"https://github.com/janineahn\",\n        \"parentName\": \"p\"\n      }}>{`@janineahn`}</a>\n      {` and `}\n      <a {...{\n        \"href\": \"https://github.com/redaxmedia\",\n        \"parentName\": \"p\"\n      }}>{`@redaxmedia`}</a>\n      {` for this contribution!`}</p>\n    <p>{`Instead of changing the `}\n      <inlineCode {...{\n        \"parentName\": \"p\"\n      }}>{`api_url`}</inlineCode>\n      {` in the cypress config, it's also possible to reroute the cypress api IP in your `}\n      <inlineCode {...{\n        \"parentName\": \"p\"\n      }}>{`/etc/hosts`}</inlineCode>\n      {` file.`}</p>\n    <p>{`Sorry-cypress includes an executable helper for this, to use it run `}\n      <inlineCode {...{\n        \"parentName\": \"p\"\n      }}>{`sudo sorry-cypress`}</inlineCode>\n      {` (superuser rights are necessary for editing the hosts file).`}</p>\n    <p>{`This command will use `}\n      <a {...{\n        \"href\": \"https://github.com/feross/hostile\",\n        \"parentName\": \"p\"\n      }}>{`hostile`}</a>\n      {` to change your hosts file and will start cypress in a child process.\nOnce Cypress is done or killed the rerouting rule in your hosts file will be deleted.`}</p>\n    <p>{`Please be aware of the following limitation before using `}\n      <inlineCode {...{\n        \"parentName\": \"p\"\n      }}>{`sorry-cypress.js`}</inlineCode>\n      {` script:`}</p>\n    <ul>\n\n      <li {...{\n        \"parentName\": \"ul\"\n      }}>{`Only works with `}\n        <inlineCode {...{\n          \"parentName\": \"li\"\n        }}>{`etc/hosts`}</inlineCode>\n        {` or `}\n        <inlineCode {...{\n          \"parentName\": \"li\"\n        }}>{`C:/Windows/System32/drivers/etc/hosts`}</inlineCode>\n        {` present`}</li>\n\n\n      <li {...{\n        \"parentName\": \"ul\"\n      }}>{`Only works with HTTPS on and port 443 on the target machine`}</li>\n\n\n      <li {...{\n        \"parentName\": \"ul\"\n      }}>{`Has hard coded arguments for the cypress run`}</li>\n\n\n      <li {...{\n        \"parentName\": \"ul\"\n      }}>{`Missing output that CLI started/finished`}</li>\n\n    </ul>\n    <p>{`The command will need the following env variables:`}</p>\n    <ul>\n\n      <li {...{\n        \"parentName\": \"ul\"\n      }}><inlineCode {...{\n          \"parentName\": \"li\"\n        }}>{`SORRY_CYPRESS_RECORD_KEY`}</inlineCode></li>\n\n\n      <li {...{\n        \"parentName\": \"ul\"\n      }}><inlineCode {...{\n          \"parentName\": \"li\"\n        }}>{`SORRY_CYPRESS_API_IP`}</inlineCode></li>\n\n\n      <li {...{\n        \"parentName\": \"ul\"\n      }}><inlineCode {...{\n          \"parentName\": \"li\"\n        }}>{`SORRY_CYPRESS_BUILD_ID`}</inlineCode></li>\n\n    </ul>\n    <p>{`Example:`}</p>\n    <pre><code {...{\n        \"className\": \"language-sh\",\n        \"parentName\": \"pre\"\n      }}>{`sudo SORRY_CYPRESS_BUILD_ID=build-001 SORRY_CYPRESS_RECORD_KEY=whateve SORRY_CYPRESS_API_IP=127.0.0.1 ./bin/sorry-cypress.js <other cypress arguments>\n`}</code></pre>\n\n  </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}