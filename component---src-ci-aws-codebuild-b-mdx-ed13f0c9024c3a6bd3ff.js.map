{"version":3,"sources":["webpack:///../src/ci/aws-codebuild-b.mdx"],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","isMDXComponent"],"mappings":"uPAMaA,G,UAAe,S,4MAE5B,IAKMC,EAAc,CAClBD,gBAEIE,EAAYC,IACH,SAASC,EAAT,GAGZ,IAFDC,EAEC,EAFDA,WACGC,EACF,8BACD,OAAO,YAACJ,EAAD,eAAeD,EAAiBK,EAAhC,CAAuCD,WAAYA,EAAYE,QAAQ,cAC5E,wDACE,iBACE,KAAQ,gCACR,WAAc,KAFhB,eADF,uCAME,iBACE,KAAQ,oDACR,WAAc,KAFhB,qDANF,KAWA,uBACA,oRACA,yFACE,iBACE,KAAQ,4CACR,WAAc,KAFhB,8CAIF,qBAAG,0BACC,WAAc,KADf,uBAGH,uBAAK,oBACD,UAAa,eACb,WAAc,OAFb,o5BAkCL,qBAAG,0BACC,WAAc,KADf,0BAGH,uBAAK,oBACD,UAAa,eACb,WAAc,OAFb,0lC,0MA4CTH,EAAWI,gBAAiB","file":"component---src-ci-aws-codebuild-b-mdx-ed13f0c9024c3a6bd3ff.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/sorry-cypress.dev/sorry-cypress.dev/node_modules/gatsby-theme-docz/src/base/Layout.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n    <p>{`This tutorial is contributed by `}\n      <a {...{\n        \"href\": \"https://github.com/KyleThenTR\",\n        \"parentName\": \"p\"\n      }}>{`@KyleThenTR`}</a>\n      {`. The original text is available at `}\n      <a {...{\n        \"href\": \"https://github.com/agoldis/sorry-cypress/issues/6\",\n        \"parentName\": \"p\"\n      }}>{`https://github.com/agoldis/sorry-cypress/issues/6`}</a>\n      {`.`}</p>\n    <hr />\n    <p>{`This first buildspec if what we use in our pipeline to verify an environment once we've already deployed. The second buildspec is one we use in our merge requests as a runner before we can merge into master (just to verify we aren't breaking anything)`}</p>\n    <p>{`The codebuilds are running on the cypress/browsers docker images `}\n      <a {...{\n        \"href\": \"https://hub.docker.com/r/cypress/browsers\",\n        \"parentName\": \"p\"\n      }}>{`https://hub.docker.com/r/cypress/browsers`}</a></p>\n    <p><inlineCode {...{\n        \"parentName\": \"p\"\n      }}>{`buildspec-test.yml`}</inlineCode></p>\n    <pre><code {...{\n        \"className\": \"language-yml\",\n        \"parentName\": \"pre\"\n      }}>{`version: 0.2\n\nphases:\n  pre_build:\n    commands:\n      - npm ci\n      - npm install concurrently -g\n      - sed -i -E \"s@(api_url:) (.*)@\\\\1 \\\\\"\\${SORRY_CYPRESS_DIRECTOR_URL}\\\\\"@g\" ~/.cache/Cypress/3.8.3/Cypress/resources/app/packages/server/config/app.yml\n  build:\n    commands:\n      - Xvfb :99 &\n      - export DISPLAY=:99\n      - CYPRESS_CI_RUN_COMMAND=\"npm run cy:run -- --record --key ci-tests --parallel --ci-build-id CI-\\${CODEBUILD_START_TIME}-\\${CODEBUILD_BUILD_ID}\"\n      - |\n        concurrently \\\\\n        \"$CYPRESS_CI_RUN_COMMAND\" \\\\\n        \"$CYPRESS_CI_RUN_COMMAND\" \\\\\n        \"$CYPRESS_CI_RUN_COMMAND\" \\\\\n        \"$CYPRESS_CI_RUN_COMMAND\" \\\\\n        \"$CYPRESS_CI_RUN_COMMAND\"\n      - pkill Xvfb\n  post_build:\n    commands:\n      - npm run cy:merge-results\n      - npm run cy:generate-report\n\nartifacts:\n  files:\n    - '**/*'\n  base-directory: './cypress/results'\n`}</code></pre>\n    <p><inlineCode {...{\n        \"parentName\": \"p\"\n      }}>{`buildspec-ci-test.yml`}</inlineCode></p>\n    <pre><code {...{\n        \"className\": \"language-yml\",\n        \"parentName\": \"pre\"\n      }}>{`version: 0.2\n\nenv:\n  git-credential-helper: yes\n\nphases:\n  pre_build:\n    commands:\n      - git fetch origin\n      - git merge origin/master --no-commit --no-ff\n      - npm ci\n      - npm install concurrently wait-on -g\n      - sed -i -E \"s@(api_url:) (.*)@\\\\1 \\\\\"\\${SORRY_CYPRESS_DIRECTOR_URL}\\\\\"@g\" ~/.cache/Cypress/3.8.3/Cypress/resources/app/packages/server/config/app.yml\n  build:\n    commands:\n      - npm run start-prod &\n      - Xvfb :99 &\n      - export DISPLAY=:99\n      - CYPRESS_CI_RUN_COMMAND=\"npm run cy:run -- --record --key ci-tests --parallel --ci-build-id Runner-\\${CODEBUILD_START_TIME}-\\${CODEBUILD_BUILD_ID}\"\n      - |\n        wait-on http://localhost:3000 && concurrently \\\\\n        \"$CYPRESS_CI_RUN_COMMAND\" \\\\\n        \"$CYPRESS_CI_RUN_COMMAND\" \\\\\n        \"$CYPRESS_CI_RUN_COMMAND\" \\\\\n        \"$CYPRESS_CI_RUN_COMMAND\" \\\\\n        \"$CYPRESS_CI_RUN_COMMAND\"\n      - pkill Xvfb\n  post_build:\n    commands:\n      - npm run cy:merge-results\n      - npm run cy:generate-report\n\nartifacts:\n  files:\n    - '**/*'\n  base-directory: './cypress/results'\n`}</code></pre>\n\n  </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}